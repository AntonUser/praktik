<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-dark">

    <script>
        alert("Инструкция:\n -Для выполнения опреаций с двумя аргументами (+,-,*,/,возведение в степень, процент) заполните поля first arg и second arg, кликните по нужной операции и нажмите '=', в поле result появится результат\n-Для всех остальных операций нужно заполнять только first arg, ход остальных манипуляций такой же как и в первом случае\nТак же для тригонометрических операций есть возможность выбора нужной метрики(радианы/градусы)")
        async function fun1() {
            let valueOperation = $('input[name="oper"]:checked').val();
            if (valueOperation === 'sin' || valueOperation === 'cos' || valueOperation === 'tan' || valueOperation === 'ctan') {
                let u;
                if (!$('#checkbox').is(':checked')) {
                    u = 'deg'
                } else {
                    u = 'rad'
                }

                var strJson = {//обект с данными из формы
                    firstArg: $('input[name="firstArg"]').val(),
                    unit: u,
                    operation: valueOperation
                };
                query('http://localhost:3001/trigonometry', strJson);


            } else if (valueOperation === 'sqrt' || valueOperation === 'sqr') {
                var strJson = {//обект с данными из формы
                    firstArg: $('input[name="firstArg"]').val(),
                    operation: valueOperation,
                };
                query('http://localhost:3001/oneArg', strJson);
            } else {
                var strJson = {//обект с данными из формы
                    firstArg: $('input[name="firstArg"]').val(),
                    secondArg: $('input[name="secondArg"]').val(),
                    operation: valueOperation
                };
                query('http://localhost:3001/', strJson);
            }
        }

        async function query(url, bodyRequest) {
            const result = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(bodyRequest)
            });
            let json = await result.json();
            $("#result").val(json);
        }
    </script>

    <form name="calculator">
        <div class="textfieldscontainer" style="margin-top: 20%;">
            <input type="textfield" name="firstArg" value="" class="sizetextfield btn btn-outline-danger "
                placeholder="first arg">
            <input type="textfield" name="secondArg" value="" class="sizetextfield btn btn-outline-danger "
                placeholder="second arg">
        </div>
        <div class="textfieldscontainer">
            <input type="textfield" name="result" id="result" value="" class="btn btn-outline-danger "
                placeholder="result" style="width: 250px; height: 35px;">
        </div>
        <div class="container">
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn bt-red button-size">
                    <input type="radio" name="oper" id="+" value="+" autocomplete="off">+
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="-" autocomplete="off" value="-">-
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="*" autocomplete="off" value="*">*
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="/" autocomplete="off" value="/">/
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="per" autocomplete="off" value="per">%
                </label>
            </div>
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="sin" autocomplete="off" value="sin">sin
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="cos" autocomplete="off" value="cos">cos
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="tan" autocomplete="off" value="tan">tan
                </label>
                <label class="btn bt-red button-size">
                    <input type="radio" name="oper" id="ctan" autocomplete="off" value="ctan">ctan
                </label>
            </div>
            <div id="secondcolumn">
                <input type="reset" value="CE" class="btn btn-outline-danger button-size">
                <div class="btn-group btn-group-toggle" data-toggle="buttons" id="drcokumn">
                    <label class="btn bt-red button-size">
                        <input type="radio" name="oper" id="pow" autocomplete="off" value="pow">x<sup>y</sup>
                    </label>
                    <label class="btn bt-red button-size">
                        <input type="radio" name="oper" id="sqrt" autocomplete="off" value="sqrt">√
                    </label>
                    <label class="btn bt-red button-size">
                        <input type="radio" name="oper" id="sqr" autocomplete="off" value="sqr">x<sup>2</sup>
                    </label>
                </div>
                <div id="fourthcolumn">
                    <input type="button" value="=" class="btn btn-outline-danger button-size" onclick="fun1()">
                </div>
            </div>

            <div class="toggle-button-cover">
                <div class="button r" id="button-3">
                    <input type="checkbox" class="checkbox" id="checkbox" name="checkbox">
                    <div class="knobs"></div>
                    <div class="layer"></div>
                </div>
            </div>
            
        </div>
    </form>
</body>
</html>